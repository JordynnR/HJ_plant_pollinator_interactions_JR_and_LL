---
title: "Data_cleaning"
output: html_document
date: "2025-11-19"
---

Questions for Rebecca:
2. how to extract month from date column and transform into numeric
3. network- do we need to choose/keep one of the columns in the spreadsheet of the interaction strength values? sankey plot maybe- investigate required inputs
4. would spatial data even be useful to us


columns to keep:
Year
Site??
Genus??
GenusSpecies
PlantGenus
PlantGenusSpecies
Date

```{r}
##need to read data in and start cleaning it up- 
# 1- get rid of unnecessary columns
# 2- figure out what species to keep
raw_data<- read.csv("raw_data/spec_net_copy.csv")

```

##get rid of columns
```{r}
library(tidyverse)
library(dplyr)
kept_columns<- raw_data %>%
  select(Date, GenusSpecies, PlantGenusSpecies) %>%
  rename(BeeGenusSpecies= GenusSpecies) %>%
  dplyr::filter(BeeGenusSpecies!="")

```

use regex to filter out spp/sp (unknown) species
```{r}
sp_ending_regex <- "(^\\s*[A-Za-z]+\\s+)[sS][pP]{1,2}\\.?\\s*$"
sp_number_regex <- "sp\\.\\s*\\d+$"

no_unknown<- kept_columns %>%
  dplyr::filter(!(BeeGenusSpecies = grepl(sp_ending_regex,BeeGenusSpecies))) %>%
  dplyr::filter(!(BeeGenusSpecies = grepl(sp_number_regex,BeeGenusSpecies)))

#filter rows that are not (!) in the reg expression format of above (had to make 2 for 2 differetn formats)
```


transform date to usable format
```{r}
# month_column<- no_unknown %>%
#   some combo of mutate and/or filter??- maybe not filter and just use regex inside mutate while creating new column
class(kept_columns) #data frame

kept_columns$Date <- sub("^(\\d{1,2})/.*", "\\1", kept_columns$Date)

kept_columns <- kept_columns%>%
  rename(Month = Date)

kept_columns

table(kept_columns$Month)
```


